<%   @cat_items.keys.sort.each do |hdr|
	 items = @cat_items[hdr] 
-%>

  <table class="cat_tables" id="<%=@ids[hdr]%>">
  <% for item in items %>
    <tr>
	<td rowspan="2" width="1%">
			<%= image_tag_with_check "vegi/#{item.image_file}.jpg",  
			:onclick => "Effect.Appear('img_#{@ids[hdr]}_#{item.id}', {duration: 0.3});" %>
	
	        <div style="position:relative;"> 
	          <div id='img_<%= "#{@ids[hdr]}_#{item.id}"%>' class="img_popup" style="display:none;">
	             <%=image_tag("vegi-large/#{item.image_file}.jpg")%>
	          </div>
	        </div> 
      </td>

      <td height="50" style="border-bottom: none">
      	<strong><%=h item.label %></strong>
		<% if !item.desc.blank? -%>
	    	<p class="item_desc">
	    		<% if(item.desc.mb_chars.size < 100) -%>
					<%= item.desc %>
				<% else -%>
					<%= item.desc.mb_chars[0,99] + " ..."%>
				<% end %>
			</p>
		<% end -%>
	  </td>
      <td style="width:75px;border-bottom: none" nowrap="true">
	    <%if item.item_units.size == 1%>
	  		<%=item.item_units[0].label%>
			<%=hidden_field_tag "unit_id[#{item.id}]", item.item_units[0].id %>
		<%else%>
			<%=collection_select(:unit_id, item.id, item.item_units, :id, :label)%>
		<%end%>
	  </td>
    </tr>
    <tr>
	  <td valign="bottom"><%=I18n.t("catalog.from", :supplier => item.supplier.name)%></td>
      <td nowrap="true"><%= text_field_tag "cart_item[#{item.id}]", "1" , :size => 4, :class => "cart_item" %>
          <%=button_to_function ">>", "createCartLine('#{item.id}')"%>
      </td>
    </tr>
  <% end %>
  </table>

  <%=javascript_tag "makeColx('#{@ids[hdr]}','#{hdr.name}')"%>

<% end %>
