<!--[if lt IE 7]>
<style type="text/css">
#container_box {
  width: expression( ( document.documentElement.clientWidth - 190 ) + 'px');
}
</style>
<![endif]-->

<div id="main_continer">
<div id="header_box">
<!--		<h1>LOGO!!!</h1>
	<span id="header_info_box">
		<span id="language_box"><a href="#">English</a> <a href="#">日本語</a></span>
	</span>
-->
</div>
	
<div id="nav_box">
  <div id="tab">
    <ul>
      <li><a href="#" class="mitem_cm" onClick="goInfo(); return false;"><span>Home</span></a></li>
      <li><a href="#" class="mitem_cm" onClick="goCatalog('sp'); return false;"><span>Today's Specials!</span></a></li>
      <li><a href="#" class="mitem_dd" onClick="return false;"><span>&#x25B6; Browse By Category</span></a></li>
      <li><div id="brw_pl_o" style="display:none"><div id="brw_pl" class="brw_items"></div></div></li>
      <li><a href="#" class="mitem_dd" onClick="return false;"><span>&#x25B6; Browse By Supplier</span></a></li>
      <li><div id="brw_su_o" style="display:none"><div id="brw_su" class="brw_items"></div></div></li>
      <li><a href="#" class="mitem_cm" onClick="return false;"><span>Checkout!</span></a></li>
      <li><a href="#" class="mitem_dd" onClick="return false;"><span>&#x25B6; Information</span></a></li>
      <li><div id="brw_info_o" style="display:none"><div id="brw_info" class="brw_items">
        <ul>
          <li>Farmers</li>
          <li>How To Order</li>
          <li>Calendar</li>
          <li>Links</li>
        </ul>
      </div></div></li>
      
    </ul>
  </div>
</div>

<div id="container_box">
  <div id="main_box">

  <table width="100%" cellspacing="15px">
    <tr>
      <td id="center_col" valign="top" width="60%">
        <div id="info_box" class="a_boxes" style="display:none"></div>
        <div id="checkout_box" class="a_boxes" style="display:none"></div>
        <div id="payment_box" class="a_boxes" style="display:none"></div>
      </td>
      <td id="right_col" valign="top">
        <div id="account_box" class="a_boxes secure_context" style="display:none"></div>
        <div id="cart_box" class="a_boxes" style="display:none"></div>
      </td>
    </tr>
  </table>
  
  </div>
</div>
</div>

<script type="text/javascript">
  token = '<%=escape_javascript form_authenticity_token%>';
	
  var boxURL = {
    info_box: '<%=info_path%>',
    cat: '<%=catalog_path%>',
    cart_box: '<%=cart_lines_path%>',
    account_box: '<%=account_path%>',
    checkout_box: {url: '<%=checkout_path%>', force: true},
    payment_box: {url: '<%=payment_path%>', force: true}
  };
  
  makeColx('cart_box', "Shopping Cart"); 
  makeColx('account_box', "User Account");
  makeColx('payment_box', "Payment Method"); 

  window.dhtmlHistory.create({
    toJSON: function(o) {
      return Object.toJSON(o);
    },
    fromJSON: function(s) {
      return s.evalJSON();
    },
    baseTitle: "Tento Express [@@@]",
    debugMode: false
  });
  
  var pageListener = function(newLocation, historyData) {
  	if(newLocation == "")
		return;
		
 	cl = newLocation.split("~");
	fn = "go" + cl[0].capitalize();
	if(cl.length > 1)
		fncall = fn + "('" + cl[1] +"')";
	else
		fncall = fn + "()";
    eval(fncall);
  };
  
  Event.observe(window, 'load', function() {
	dhtmlHistory.initialize(pageListener);
	if(dhtmlHistory.getCurrentLocation() == "")
		goInfo();
	else
		pageListener(dhtmlHistory.getCurrentLocation());
  });
  	
  $$('.mitem_dd').each( function(el){ el.observe('click', toggleDDMenu); } );
//  $$('.c_box_headers').each( function(el){ el.observe('click', handleToggleBox); } );
  
	<%=remote_function :url => categories_path%>
  
</script>
